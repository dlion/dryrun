/* ===== Fonts ============================================================= */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

/* ===== Design tokens ===================================================== */
:root{
  /* light */
  --bg: #ffffff;
  --surface: #f9fafb;
  --panel: #ffffff;
  --fg: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
  --code-bg: #f6f8fa;
  --code-ink: #1f2937;

  --accent: oklch(63% 0.20 260);   /* indigo */
  --accent-ink: #fff;

  --r-sm: 4px; --r-md: 8px; --r-lg: 12px; --r-xl: 20px;
  --shadow-1: 0 1px 2px rgba(16,24,40,.06), 0 1px 1px rgba(16,24,40,.04);
  --shadow-2: 0 8px 20px rgba(2,6,23,.08), 0 2px 6px rgba(2,6,23,.06);

  --space: 14px;
  --max: 880px;
  --measure: 68ch;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #0b0d10;
    --surface: #111418;
    --panel: #161b22;
    --fg: #e5e7eb;
    --muted: #9ca3af;
    --border: #1f2937;
    --code-bg: #0e1116;
    --code-ink: #e5e7eb;
  }
}

/* explicit toggles */
:root.theme-light{ color-scheme: light; }
:root.theme-dark{ color-scheme: dark; }

/* ===== Base =============================================================== */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font: 16px/1.7 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: var(--fg);
  background: var(--bg);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}
a{ color: var(--accent); text-decoration: underline; text-underline-offset: 2px; }
a:hover{ text-decoration-thickness: .12em; }
img,video{ max-width:100%; height:auto; }
.container{ max-width: var(--max); margin:0 auto; padding: 20px; }

/* ===== Header ============================================================= */
.site-header{
  position: sticky; top:0; z-index:50;
  backdrop-filter: saturate(180%) blur(8px);
  background: color-mix(in oklab, var(--bg), transparent 15%);
  border-bottom: 1px solid var(--border);
}
.site-header .bar{ display:flex; align-items:center; justify-content:space-between; gap: 16px; }
.site-title{ font-weight: 700; text-decoration:none; color:var(--fg); font-size:1.05rem; }
.site-nav{ display:flex; align-items:center; gap: 8px; flex-wrap: wrap; }
.site-nav a{
  text-decoration:none; color:var(--fg);
  padding: 6px 10px;
  border-radius: var(--r-sm);
  border: 1px solid color-mix(in oklab, var(--fg), transparent 85%);
  background: color-mix(in oklab, var(--bg), var(--fg) 2%);
  font-weight: 500; font-size:.95rem;
}
.site-nav a.active,
.site-nav a:hover{
  background: color-mix(in oklab, var(--accent), transparent 90%);
  border-color: color-mix(in oklab, var(--accent), transparent 80%);
}

.theme-toggle{
  border: 1px solid var(--border); padding:.35rem .55rem;
  border-radius: var(--r-sm);
  background: var(--panel); color:var(--fg);
}

/* ===== Home list layout =================================================== */
.list { display:block; }
.list .item { padding: 28px 0; border-bottom: 1px solid var(--border); }
.list .item:first-child { padding-top: 0; }
.list h2 {
  margin: 0 0 .35rem 0;
  font-weight: 700;
  font-size: clamp(1.3rem, 1.1rem + .9vw, 2rem);
  line-height: 1.3;
}
.list .meta { color: var(--muted); font-size: .9rem; margin: .2rem 0 .6rem; }
.list .excerpt { margin: 0; max-width: var(--measure); color: var(--muted); font-size: 1rem; }

/* ===== Post layout ======================================================= */
.post{ max-width: var(--measure); margin: 36px auto 0 auto; }
.post-header h1{
  margin:.2rem 0 .3rem 0;
  font-weight: 800;
  font-size: clamp(1.9rem, 2.6vw + 1rem, 2.9rem);
  line-height:1.25;
}
.post-meta{ color:var(--muted); font-size:.95rem; margin-bottom: 20px; }

.post-content p{ margin: 1em 0; font-size: 1.05rem; line-height: 1.75; }
.post-content h2{ margin-top:2rem; margin-bottom:.7rem; font-size:1.45rem; font-weight:700; }
.post-content h3{ margin-top:1.5rem; margin-bottom:.5rem; font-size:1.2rem; font-weight:600; }

blockquote{
  margin: 1.2rem 0; padding: .1rem 1rem;
  border-left: 4px solid var(--accent);
  color: var(--muted);
  font-style: italic;
}
figure{ margin: 1.5rem 0; }
figure img{ display:block; max-width:100%; border-radius: var(--r-md); }
figcaption{ color:var(--muted); font-size:.9rem; margin-top:.4rem; }

/* responsive video (YouTube) */
.video{
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  height: 0;
  overflow: hidden;
  margin: 1.5rem 0;
  border-radius: var(--r-md);
  box-shadow: var(--shadow-1);
}
.video iframe{
  position: absolute;
  top:0; left:0;
  width:100%; height:100%;
  border:0;
  border-radius: var(--r-md);
}

/* callouts */
.callout{
  padding: .9rem 1rem; border:1px solid var(--border);
  background: var(--surface);
  border-radius: var(--r-md); margin:1.2rem 0;
}
.callout.info{ border-color: var(--accent); }
.callout.warn{ border-color: #d97706; }
.callout.ok{   border-color: #059669; }

/* ===== Code =============================================================== */
pre, code, kbd, samp{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}
pre{
  background: var(--code-bg); color: var(--code-ink);
  padding: 1rem; border-radius: var(--r-md); overflow:auto;
  font-size:.9rem; line-height:1.5;
}
code{
  background: color-mix(in oklab, var(--code-bg), transparent 70%);
  color: var(--fg);
  padding:.15rem .35rem;
  border-radius:4px;
  border:1px solid var(--border);
  font-size:.9rem;
}

/* copy button */
.copy-btn{
  position: absolute; top: 8px; right: 8px;
  padding:.25rem .45rem; font-size:.8rem; border:1px solid var(--border);
  border-radius: 4px; background: var(--panel); color:var(--fg);
}
pre.has-copy{ position: relative; }

/* lang badge */
.code-lang {
  position:absolute; top:8px; left:8px; z-index:1;
  font-size:.72rem; text-transform:uppercase; letter-spacing:.04em;
  background: rgba(0,0,0,.35); color:#fff;
  padding:.15rem .4rem; border-radius:4px;
}

/* ===== Footer ============================================================= */
.pagination{ display:flex; gap:12px; align-items:center; justify-content:center; margin: 2rem 0; color:var(--muted); }
.pagination a{ text-decoration:none; border:1px solid var(--border); padding:.45rem .65rem; border-radius:4px; color:var(--fg); background:var(--panel); }
.pagination a:hover{ background: color-mix(in oklab, var(--panel), var(--bg) 10%); }

.site-footer{ margin-top: 36px; background: var(--surface); border-top:1px solid var(--border); }
.site-footer .container{ display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:12px; font-size:.9rem; color:var(--muted); }
.links a{ color:var(--muted); text-decoration:none }
.links a:hover{ text-decoration:underline }